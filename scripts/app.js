!function(e){function t(a){if(n[a])return n[a].exports;var r=n[a]={exports:{},id:a,loaded:!1};return e[a].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(2),o=a(i),s=n(28),u=function e(){function t(){var e=Math.floor(a.clientWidth*u),t=Math.floor(a.clientHeight*u);a.width===e&&a.height===t||(a.width=e,a.height=t,i.setSize(a.clientWidth,a.clientHeight,!1),c.resize(e,t))}function n(){t(),c.update(l.getDelta()),requestAnimationFrame(n)}if(r(this,e),!s())return void(document.body.innerHTML="Unable to initialize WebGL. Your browser may not support it.");var a=document.getElementById("canvas"),i=new THREE.WebGLRenderer({antialias:!0,alpha:!1,canvas:a}),u=window.devicePixelRatio||1;i.setPixelRatio(u);var c=new o.default(i);this.appViewer=c;var l=new THREE.Clock;n()};window.app=new u},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(3),s=a(o),u=n(5),c=a(u),l=n(6),h=a(l),d=n(19),f=a(d),p=n(20),m=a(p),v=n(21),y=a(v),w=n(25),T=a(w),g=n(26),_=a(g),E=n(27),b=new THREE.Raycaster,x=new THREE.Vector2,P=void 0,k=1,C=function(e){return Math.min(s.default.game.maxT,Math.max(-s.default.game.maxT,e))},R=function(){function e(t){r(this,e),this.renderer=t,this.renderer.setClearColor(s.default.renderer.clearColor,s.default.renderer.clearAlpha),this.renderer.setPixelRatio(s.default.renderer.devicePixelRatio),this.sceneManager=new h.default;var n=this.renderer.getContext();P=n.canvas.clientWidth/n.canvas.clientHeight;var a=s.default.camera.frustumSize*P/2,i=s.default.camera.frustumSize/2;this.camera=new THREE.OrthographicCamera(-a,a,i,-i,s.default.camera.near,s.default.camera.far),this.camera.position.fromArray(s.default.camera.pos),this.camera.lookAt((new THREE.Vector3).fromArray(s.default.camera.target)),this.camera.near=s.default.camera.near,this.camera.far=s.default.camera.far,this.camera.updateProjectionMatrix(),this.sceneReady=!1,document.addEventListener("sceneReady",this.onSceneReady.bind(this)),s.default.isMobile?(document.addEventListener("touchstart",this.onMouseDownTouchStart.bind(this)),document.addEventListener("touchmove",this.onMouseMoveTouchMove.bind(this)),document.addEventListener("touchend",this.onMouseUpTouchEnd.bind(this)),document.addEventListener("touchcancel",this.onMouseUpTouchEnd.bind(this))):(document.addEventListener("mousedown",this.onMouseDownTouchStart.bind(this)),document.addEventListener("mouseup",this.onMouseUpTouchEnd.bind(this)),document.addEventListener("mousemove",this.onMouseMoveTouchMove.bind(this)))}return i(e,[{key:"onSceneReady",value:function(){c.default.phasesSeq=[c.default.phases.PLAYER_ATTACK,c.default.phases.ENEMY_DEFENCE,c.default.phases.APPLY,c.default.phases.RESET,c.default.phases.ENEMY_ATTACK,c.default.phases.PLAYER_DEFENCE,c.default.phases.APPLY,c.default.phases.RESET],c.default.activePhaseIndex=6,c.default.activePhase=c.default.phasesSeq[c.default.activePhaseIndex],this.env=new f.default(this.sceneManager.assetsLoader.assets),this.sceneManager.scene.add(this.env.mesh),this.tracks=new m.default(this.sceneManager.assetsLoader.assets),this.sceneManager.scene.add(this.tracks.mesh),this.towers=new y.default(this.sceneManager.assetsLoader.assets),this.sceneManager.scene.add(this.towers.mesh),this.cards=new T.default(this.tracks,this.sceneManager.assetsLoader.assets),this.sceneManager.scene.add(this.cards.mesh),this.botLogic=new _.default(this),this.sceneReady=!0,this.nextPhase()}},{key:"update",value:function(e){this.sceneReady&&(s.default.time+=e,this.towers.update(),this.renderer.render(this.sceneManager.scene,this.camera))}},{key:"_playerActive",value:function(){return c.default.activePhase===c.default.phases.PLAYER_ATTACK||c.default.activePhase===c.default.phases.PLAYER_DEFENCE}},{key:"_giveCardsToPlayer",value:function(e){for(var t=e?c.default.playerHand:c.default.enemyHand,n=0;n<4;++n)t[n]||this._giveCardToPlayer(e,n)}},{key:"_giveCardToPlayer",value:function(e,t){var n=e?c.default.playerHand:c.default.enemyHand;n[t]=(0,E.generateCard)(),e&&this.cards.updatePlayerCard(t,n[t])}},{key:"shuffleRemainingCards",value:function(e){for(var t=e?c.default.playerHand:c.default.enemyHand,n=0;n<4;++n)t[n]&&this._giveCardToPlayer(e,n)}},{key:"playCard",value:function(e,t,n){e&&this.cards.hideCard(t);var a=e?c.default.playerHand:c.default.enemyHand;this.tracks.spawnUnitOnTrack(e,n,a[t]);var r=e?0:1;c.default.towersT[r][n]=c.default.towersT[r][n]+a[t].price,this.towers.setTowerTemperature(e,n,c.default.towersT[r][n]),this.updateTemperatures(),a[t]=null}},{key:"nextPhase",value:function(){var e=this;c.default.activePhaseIndex+=1,c.default.activePhaseIndex===c.default.phasesSeq.length&&(c.default.activePhaseIndex=0),c.default.activePhase=c.default.phasesSeq[c.default.activePhaseIndex],c.default.activePhase===c.default.phases.ENEMY_ATTACK||c.default.activePhase===c.default.phases.ENEMY_DEFENCE?this.botLogic.makeTurn(c.default.activePhase===c.default.phases.ENEMY_ATTACK):c.default.activePhase===c.default.phases.RESET?(this.tracks.clearTracks(),this._giveCardsToPlayer(!0),this._giveCardsToPlayer(!1),this.nextPhase()):c.default.activePhase===c.default.phases.APPLY?(this._applyUnitsDamage(),setTimeout(function(){e._applyTowersBurn()},1700),setTimeout(function(){e._checkWinLose()||e.nextPhase()},2e3)):this._playerActive()&&(c.default.usedShuffleThisTurn=!1,this.env.endButton.material.color=this.env.endButton.userData.defaultColor,this.env.shuffleButton.material.color=this.env.endButton.userData.defaultColor)}},{key:"_applyUnitsDamage",value:function(){for(var e=this,t=function(t){setTimeout(function(){e._applyUnitsDamageOnTrack(t)},500*t)},n=0;n<3;++n)t(n)}},{key:"_applyUnitsDamageOnTrack",value:function(e){var t=this.tracks.applyDamageOnTrack(e);if(t){var n=t.playerWon?1:0;c.default.towersT[n][e]=c.default.towersT[n][e]+t.damage,this.towers.setTowerTemperature(!t.playerWon,e,c.default.towersT[n][e]),this.towers.showFadingDamage(!t.playerWon,e,t.damage),this.updateTemperatures()}}},{key:"_applyTowersBurn",value:function(){for(var e=0;e<3;++e){for(var t=Math.abs(c.default.towersT[0][e]),n=Math.abs(c.default.towersT[1][e]),a=0,r=0,i=0;i<s.default.game.burn.length;++i)t>s.default.game.burn[i].t&&(a=s.default.game.burn[i].damage*Math.sign(c.default.towersT[0][e])),n>s.default.game.burn[i].t&&(r=s.default.game.burn[i].damage*Math.sign(c.default.towersT[1][e]));0!==a&&this.towers.showFadingDamage(!0,e,a),0!==r&&this.towers.showFadingDamage(!1,e,r),c.default.playerAdditiveT+=a,c.default.enemyAdditiveT+=r,this.updateTemperatures()}}},{key:"_createGameOverScreen",value:function(e){var t=document.createElement("div");t.style.position="absolute",t.style.backgroundColor="white",t.style.opacity=.8,t.style.left=0,t.style.right=0,t.style.top=0,t.style.bottom=0,t.style.fontSize="140px",t.style.textAlign="center";var n=document.createTextNode(e);t.appendChild(n),document.body.appendChild(t)}},{key:"_checkWinLose",value:function(){var e=Math.abs(c.default.enemyT)>=s.default.game.maxT,t=Math.abs(c.default.playerT)>=s.default.game.maxT;return e?(this._createGameOverScreen("WIN!"),!0):!!t&&(this._createGameOverScreen("LOSE!"),!0)}},{key:"updateTemperatures",value:function(){var e=c.default.towersT;c.default.playerT=C((e[0][0]+e[0][1]+e[0][2])/3+c.default.playerAdditiveT),c.default.enemyT=C((e[1][0]+e[1][1]+e[1][2])/3+c.default.enemyAdditiveT),this.towers.updatePlayerTemperatures()}},{key:"onMouseDownTouchStart",value:function(e){e.preventDefault();var t=e.clientX,n=e.clientY;e.changedTouches&&e.changedTouches[0]&&(t=e.changedTouches[0].clientX,n=e.changedTouches[0].clientY),x.x=t/window.innerWidth*2-1,x.y=2*-(n/window.innerHeight)+1,b.setFromCamera(x,this.camera),c.default.isMouseDown=!0;var a=b.intersectObjects(this.cards.mesh.children);c.default.activeCard=a[0]?a[0].object:null,a=b.intersectObjects(this.env.mesh.children),a[0]&&this._playerActive()&&("shuffle_button"!==a[0].object.name||c.default.usedShuffleThisTurn?"end_button"===a[0].object.name&&(this.env.endButton.material.color=this.env.endButton.userData.inactiveColor,this.env.shuffleButton.material.color=this.env.endButton.userData.inactiveColor,this.nextPhase()):(c.default.usedShuffleThisTurn=!0,this.env.shuffleButton.material.color=this.env.endButton.userData.inactiveColor,this.shuffleRemainingCards(!0)))}},{key:"onMouseUpTouchEnd",value:function(e){e.preventDefault(),c.default.isMouseDown=!1,c.default.activeCard&&(c.default.activeCard.position.x=c.default.activeCard.userData.initPosX,c.default.activeCard.position.y=c.default.activeCard.userData.initPosY),c.default.activeTrack&&(c.default.activeTrack.material.color=c.default.activeTrack.userData.defaultColor),c.default.activeCard&&c.default.activeTrack&&!this.tracks.hasUnitOnTrack(!0,c.default.activeTrack.userData.index)&&this.playCard(!0,c.default.activeCard.userData.index,c.default.activeTrack.userData.index),c.default.activeCard=void 0}},{key:"onMouseMoveTouchMove",value:function(e){e.preventDefault();var t=e.clientX,n=e.clientY;e.changedTouches&&e.changedTouches[0]&&(t=e.changedTouches[0].clientX,n=e.changedTouches[0].clientY),x.x=t/window.innerWidth*2-1,x.y=2*-(n/window.innerHeight)+1,b.setFromCamera(x,this.camera),this._playerActive()&&this._updatePlayerControls()}},{key:"_updatePlayerControls",value:function(){this._processCardMovementIfNeeded();var e=b.intersectObjects(this.env.mesh.children),t=e[0]?e[0].object:null;c.default.usedShuffleThisTurn||(t&&"shuffle_button"===t.name?this.env.shuffleButton.material.color=this.env.shuffleButton.userData.selectedColor:this.env.shuffleButton.material.color=this.env.shuffleButton.userData.defaultColor),t&&"end_button"===t.name?this.env.endButton.material.color=this.env.endButton.userData.selectedColor:this.env.endButton.material.color=this.env.endButton.userData.defaultColor}},{key:"_processCardMovementIfNeeded",value:function(){if(c.default.activeCard){c.default.activeCard.position.x=x.x*k*P*.5,c.default.activeCard.position.y=x.y*k*.5;var e=b.intersectObjects(this.tracks.mesh.children),t=e[0]?e[0].object:null;t?c.default.activeTrack?c.default.activeTrack.uuid!==t.uuid&&(c.default.activeTrack.material.color=c.default.activeTrack.userData.defaultColor,c.default.activeTrack=t,c.default.activeTrack.material.color=c.default.activeTrack.userData.selectedColor):(c.default.activeTrack=t,c.default.activeTrack.material.color=c.default.activeTrack.userData.selectedColor):c.default.activeTrack&&(c.default.activeTrack.material.color=c.default.activeTrack.userData.defaultColor,c.default.activeTrack=null)}}},{key:"resize",value:function(e,t){P=e/t,P<.563&&(k=.563/P),this.camera.aspect!==P&&(this.camera.left=-k*s.default.camera.frustumSize*P/2,this.camera.right=k*s.default.camera.frustumSize*P/2,this.camera.top=k*s.default.camera.frustumSize/2,this.camera.bottom=-k*s.default.camera.frustumSize/2,this.camera.updateProjectionMatrix())}},{key:"dispose",value:function(){}}]),e}();t.default=R},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(4)(),r={isMobile:!a.desktop(),isDebug:"debug"===window.location.hash.substr(1),useDDSTextures:!0,usePVRTextures:!0,time:0,fadeDuration:1.3,renderer:{clearColor:1315876,clearAlpha:!0,devicePixelRatio:window.devicePixelRatio||1},camera:{pos:[0,0,5],target:[0,0,0],frustumSize:1,near:.5,far:10},game:{maxT:10,burn:[{t:5,damage:2},{t:11,damage:3},{t:17,damage:5}]}};t.default=r},function(e,t,n){var a,r;!function(t){"use strict";var n=function(e,t){function n(t){return e.indexOf(t)!==-1}function a(e){var t;return t=new RegExp(e,"i"),u.className.match(t)}function r(e){a(e)||(u.className+=" "+e)}function i(e){a(e)&&(u.className=u.className.replace(e,""))}function o(t){var n=e.match(t);return n&&n.length>1&&n[1]||""}var s={},u=t||window.document.documentElement;e=(e||window.navigator.userAgent).toLowerCase(),s.ios=function(){return s.iphone()||s.ipod()||s.ipad()},s.iphone=function(){return n("iphone")},s.ipod=function(){return n("ipod")},s.ipad=function(){return n("ipad")},s.android=function(){return n("android")},s.androidPhone=function(){return s.android()&&n("mobile")},s.androidTablet=function(){return s.android()&&!n("mobile")},s.blackberry=function(){return n("blackberry")||n("bb10")||n("rim")},s.blackberryPhone=function(){return s.blackberry()&&!n("tablet")},s.blackberryTablet=function(){return s.blackberry()&&n("tablet")},s.windows=function(){return n("windows")},s.windowsPhone=function(){return s.windows()&&n("phone")},s.windowsTablet=function(){return s.windows()&&n("touch")&&!s.windowsPhone()},s.fxos=function(){return(n("(mobile;")||n("(tablet;"))&&n("; rv:")},s.fxosPhone=function(){return s.fxos()&&n("mobile")},s.fxosTablet=function(){return s.fxos()&&n("tablet")},s.meego=function(){return n("meego")},s.cordova=function(){return window.cordova&&"file:"===location.protocol},s.nodeWebkit=function(){return"object"==typeof window.process},s.bada=function(){return n("bada")},s.mobile=function(){return s.androidPhone()||s.iphone()||s.ipod()||s.windowsPhone()||s.blackberryPhone()||s.fxosPhone()||s.meego()},s.tablet=function(){return s.ipad()||s.androidTablet()||s.blackberryTablet()||s.windowsTablet()||s.fxosTablet()},s.desktop=function(){return!s.tablet()&&!s.mobile()},s.portrait=function(){return window.innerHeight/window.innerWidth>1},s.landscape=function(){return window.innerHeight/window.innerWidth<1},s.standAlone=function(){return window.navigator.standalone===!0},s.addClasses=function(){s._hasAddClasses||(s._hasAddClasses=!0,s.ios()?s.ipad()?r("ios ipad tablet"):s.iphone()?r("ios iphone mobile"):s.ipod()&&r("ios ipod mobile"):r(s.android()?s.androidTablet()?"android tablet":"android mobile":s.blackberry()?s.blackberryTablet()?"blackberry tablet":"blackberry mobile":s.windows()?s.windowsTablet()?"windows tablet":s.windowsPhone()?"windows mobile":"desktop":s.fxos()?s.fxosTablet()?"fxos tablet":"fxos mobile":s.meego()?"meego mobile":s.nodeWebkit()?"node-webkit":"desktop"),s.cordova()&&r("cordova"),s.standAlone()&&r("standalone"))};var c="";return s.ios()?(c=o(/os (\d+([_\s]\d+)*) like mac os x/i),c=c.replace(/[_\s]/g,".")):s.android()?c=o(/android[ \/-](\d+(\.\d+)*)/i):s.windowsPhone()?c=o(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):s.blackberry()?c=o(/rim\stablet\sos\s(\d+(\.\d+)*)/i):s.bada()&&(c=o(/bada\/(\d+(\.\d+)*)/i)),c&&(s.osversion=c),s.addOrientationClasses=function(){if(!s.hasOrientationListener){s.hasOrientationListener=!0;var e=function(){return s.landscape()?(i("portrait"),r("landscape")):(i("landscape"),r("portrait"))},t="onorientationchange"in window?"orientationchange":"resize";window.addEventListener?window.addEventListener(t,e,!1):window.attachEvent?window.attachEvent(t,e):window[t]=e,e()}},s};"undefined"!=typeof e&&e.exports?e.exports=n:(a=[],r=function(){return n}.apply(t,a),!(void 0!==r&&(e.exports=r)))}(this)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={isMouseDown:!1,activeCard:void 0,activeTrack:void 0,phases:{RESET:0,PLAYER_ATTACK:1,ENEMY_ATTACK:2,PLAYER_DEFENCE:3,ENEMY_DEFENCE:4,APPLY:5},phasesSeq:[],activePhaseIndex:0,activePhase:null,usedShuffleThisTurn:!1,playerHand:{0:null,1:null,2:null,3:null},enemyHand:{0:null,1:null,2:null,3:null},playerAdditiveT:0,enemyAdditiveT:0,playerT:0,enemyY:0,towersT:[[0,0,0],[0,0,0]]};t.default=n},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(7),u=a(s),c=n(18),l=a(c),h=new Event("sceneReady"),d=function(){function e(){i(this,e),this.scene=new THREE.Scene,this.assetsLoader=new u.default(this.scene),document.addEventListener("assetsLoaded",this.onAssetsLoaded.bind(this)),this.assetsLoader.loadAssets(l.default.assets)}return o(e,[{key:"onAssetsLoaded",value:function(){this.createSceneFromDescription(this.scene),this.scene.updateMatrixWorld(),document.dispatchEvent(h)}},{key:"createSceneFromDescription",value:function(e){this.addChildrenFromDescription(e,l.default.model.children)}},{key:"addChildrenFromDescription",value:function(e,t){var n=this,a=void 0;t.forEach(function(t){a=n.createObjectFromDescription(t),e.add(a),t.children&&t.children.length>0&&n.addChildrenFromDescription(a,t.children)})}},{key:"createObjectFromDescription",value:function(e){var t=null,n=null,a="Object3D";e.object&&e.object.type?a=e.object.type:e.type&&(a=e.type),e.object&&e.object.args?n=e.object.args:e.args&&(n=e.args);for(var i in n)n.hasOwnProperty(i)&&n[i].type&&"asset/texture"===n[i].type&&(n[i]=this.assetsLoader.assets.textures[n[i].name]);if("asset/json"===a)t=this.assetsLoader.assets.objects[e.name];else if("Mesh"===a||e.object&&e.object.geometry){var o=this.createObjectFromDescription(e.object.geometry),s=null;e.object.material&&(s=this.createObjectFromDescription(e.object.material)),t=new THREE.Mesh(o,s)}else t=n instanceof Array?new(Function.prototype.bind.apply(THREE[a],[null].concat(r(n)))):new THREE[a](n);return t||(t=new THREE.Object3D),e.properties&&this.addObjectProperties(t,e.properties),t}},{key:"addObjectProperties",value:function(e,t){var n=void 0,a=void 0;for(n in t)if(t.hasOwnProperty(n))if(t[n]instanceof Object){e[n]||(e[n]={});for(a in t[n])t[n].hasOwnProperty(a)&&(e[n][a]=t[n][a])}else e[n]=t[n]}}]),e}();t.default=d},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(3),s=a(o),u=n(8),c=new Event("assetsLoaded");window.THREE=window.THREE||THREE,n(16),n(17);var l=0,h=0,d=function(){function e(t){r(this,e),this.scene=t,this.assets={objects:{},textures:{}},this.objectLoader=new THREE.ObjectLoader,this.textureLoader=new THREE.TextureLoader,this.useDDS=!s.default.isIOS&&s.default.useDDSTextures,this.usePVR=s.default.isIOS&&s.default.usePVRTextures,this.DDSLoader=new THREE.DDSLoader,this.PVRLoader=new THREE.PVRLoader}return i(e,[{key:"loadAssets",value:function(e){var t=this,n=[],a=void 0,r=void 0,i=void 0,o=void 0,s=void 0;this.initProgressBar(),e.forEach(function(e){switch(e.type){case"json":r=e.path,o=t.objectLoader,s=t.assets.objects,i=e.name;break;case"texture":if(r=e.path,o=t.textureLoader,s=t.assets.textures,i=e.name,e.path instanceof Array)for(var u=0;u<e.path.length;u++){if(r=e.path[u],t.useDDS&&e.path[u].includes(".dds")){o=t.DDSLoader;break}if(t.usePVR&&e.path[u].includes(".pvr")){o=t.PVRLoader;break}}break;default:throw new Error("unknow asset type in sceneDescription: "+e.type)}a=t.loadEntry(r,s,i,o),n.push(a)}),Promise.all(n).then(function(){t.loadingFinished()})}},{key:"loadEntry",value:function(e,t,n,a){var r=this;return new Promise(function(i,o){a.load(e,function(e){t[n]=e,i()},function(e){s.default.isDebug&&console.log(e.loaded/e.total*100+"% loaded"),r.updateProgressBar(e.loaded,e.total,n)},function(e){console.log("error while loading model",e),o(e)})})}},{key:"initProgressBar",value:function(){this.progress=-1,this.assetsSizes={};var e=document.getElementById("progressBar");this.progressbar=new u.Line(e,{from:{color:"#557788"},to:{color:"#224455"},easing:"easeInOut",duration:1400,svgStyle:{display:"block",width:"100%",height:"100%",boxSizing:"border-box",borderRadius:"37px"},text:{value:"loading",style:{color:"#000",position:"absolute",left:"50%",top:"50%",padding:0,margin:0,fontWeight:"bold",fontSize:"6vh",transform:{prefix:!0,value:"translate(-50%, -50%)"}}},step:function(e,t){t.path.setAttribute("stroke",e.color)}})}},{key:"loadingFinished",value:function(){var e=document.getElementById("loadingScreen");e.className="loadingScreen-hidden",setTimeout(function(){e.style.display="none"},700),document.dispatchEvent(c)}},{key:"updateProgressBar",value:function(e,t,n){if(!this.assetsSizes[n]&&!isNaN(t)&&t>0&&(this.assetsSizes[n]={},this.assetsSizes[n].loaded=e,this.assetsSizes[n].size=t),this.assetsSizes[n]&&!isNaN(t)&&!isNaN(e)){l=0,h=0,this.assetsSizes[n].loaded=e;for(var a in this.assetsSizes)this.assetsSizes.hasOwnProperty(a)&&(l+=this.assetsSizes[a].loaded,h+=this.assetsSizes[a].size);this.progress=Math.max(l/h,this.progress),this.progressbar.set(this.progress)}}}]),e}();t.default=d},function(e,t,n){e.exports={Line:n(9),Circle:n(14),SemiCircle:n(15),Path:n(11),Shape:n(10),utils:n(13)}},function(e,t,n){var a=n(10),r=n(13),i=function(e,t){this._pathTemplate="M 0,{center} L 100,{center}",a.apply(this,arguments)};i.prototype=new a,i.prototype.constructor=i,i.prototype._initializeSvg=function(e,t){e.setAttribute("viewBox","0 0 100 "+t.strokeWidth),e.setAttribute("preserveAspectRatio","none")},i.prototype._pathString=function(e){return r.render(this._pathTemplate,{center:e.strokeWidth/2})},i.prototype._trailString=function(e){return this._pathString(e)},e.exports=i},function(e,t,n){var a=n(11),r=n(13),i="Object is destroyed",o=function e(t,n){if(!(this instanceof e))throw new Error("Constructor was called without new keyword");if(0!==arguments.length){this._opts=r.extend({color:"#555",strokeWidth:1,trailColor:null,trailWidth:null,fill:null,text:{style:{color:null,position:"absolute",left:"50%",top:"50%",padding:0,margin:0,transform:{prefix:!0,value:"translate(-50%, -50%)"}},autoStyleContainer:!0,alignToBottom:!0,value:null,className:"progressbar-text"},svgStyle:{display:"block",width:"100%"},warnings:!1},n,!0),r.isObject(n)&&void 0!==n.svgStyle&&(this._opts.svgStyle=n.svgStyle),r.isObject(n)&&r.isObject(n.text)&&void 0!==n.text.style&&(this._opts.text.style=n.text.style);var i,o=this._createSvgView(this._opts);if(i=r.isString(t)?document.querySelector(t):t,!i)throw new Error("Container does not exist: "+t);this._container=i,this._container.appendChild(o.svg),this._opts.warnings&&this._warnContainerAspectRatio(this._container),this._opts.svgStyle&&r.setStyles(o.svg,this._opts.svgStyle),this.svg=o.svg,this.path=o.path,this.trail=o.trail,this.text=null;var s=r.extend({attachment:void 0,shape:this},this._opts);this._progressPath=new a(o.path,s),r.isObject(this._opts.text)&&null!==this._opts.text.value&&this.setText(this._opts.text.value)}};o.prototype.animate=function(e,t,n){if(null===this._progressPath)throw new Error(i);this._progressPath.animate(e,t,n)},o.prototype.stop=function(){if(null===this._progressPath)throw new Error(i);void 0!==this._progressPath&&this._progressPath.stop()},o.prototype.destroy=function(){if(null===this._progressPath)throw new Error(i);this.stop(),this.svg.parentNode.removeChild(this.svg),this.svg=null,this.path=null,this.trail=null,this._progressPath=null,null!==this.text&&(this.text.parentNode.removeChild(this.text),this.text=null)},o.prototype.set=function(e){if(null===this._progressPath)throw new Error(i);this._progressPath.set(e)},o.prototype.value=function(){if(null===this._progressPath)throw new Error(i);return void 0===this._progressPath?0:this._progressPath.value()},o.prototype.setText=function(e){if(null===this._progressPath)throw new Error(i);null===this.text&&(this.text=this._createTextContainer(this._opts,this._container),this._container.appendChild(this.text)),r.isObject(e)?(r.removeChildren(this.text),this.text.appendChild(e)):this.text.innerHTML=e},o.prototype._createSvgView=function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","svg");this._initializeSvg(t,e);var n=null;(e.trailColor||e.trailWidth)&&(n=this._createTrail(e),t.appendChild(n));var a=this._createPath(e);return t.appendChild(a),{svg:t,path:a,trail:n}},o.prototype._initializeSvg=function(e,t){e.setAttribute("viewBox","0 0 100 100")},o.prototype._createPath=function(e){var t=this._pathString(e);return this._createPathElement(t,e)},o.prototype._createTrail=function(e){var t=this._trailString(e),n=r.extend({},e);return n.trailColor||(n.trailColor="#eee"),n.trailWidth||(n.trailWidth=n.strokeWidth),n.color=n.trailColor,n.strokeWidth=n.trailWidth,n.fill=null,this._createPathElement(t,n)},o.prototype._createPathElement=function(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttribute("d",e),n.setAttribute("stroke",t.color),n.setAttribute("stroke-width",t.strokeWidth),t.fill?n.setAttribute("fill",t.fill):n.setAttribute("fill-opacity","0"),n},o.prototype._createTextContainer=function(e,t){var n=document.createElement("div");n.className=e.text.className;var a=e.text.style;return a&&(e.text.autoStyleContainer&&(t.style.position="relative"),r.setStyles(n,a),a.color||(n.style.color=e.color)),this._initializeTextContainer(e,t,n),n},o.prototype._initializeTextContainer=function(e,t,n){},o.prototype._pathString=function(e){throw new Error("Override this function for each progress bar")},o.prototype._trailString=function(e){throw new Error("Override this function for each progress bar")},o.prototype._warnContainerAspectRatio=function(e){if(this.containerAspectRatio){var t=window.getComputedStyle(e,null),n=parseFloat(t.getPropertyValue("width"),10),a=parseFloat(t.getPropertyValue("height"),10);r.floatEquals(this.containerAspectRatio,n/a)||(console.warn("Incorrect aspect ratio of container","#"+e.id,"detected:",t.getPropertyValue("width")+"(width)","/",t.getPropertyValue("height")+"(height)","=",n/a),console.warn("Aspect ratio of should be",this.containerAspectRatio))}},e.exports=o},function(e,t,n){var a=n(12),r=n(13),i={easeIn:"easeInCubic",easeOut:"easeOutCubic",easeInOut:"easeInOutCubic"},o=function e(t,n){if(!(this instanceof e))throw new Error("Constructor was called without new keyword");n=r.extend({duration:800,easing:"linear",from:{},to:{},step:function(){}},n);var a;a=r.isString(t)?document.querySelector(t):t,this.path=a,this._opts=n,this._tweenable=null;var i=this.path.getTotalLength();this.path.style.strokeDasharray=i+" "+i,this.set(0)};o.prototype.value=function(){var e=this._getComputedDashOffset(),t=this.path.getTotalLength(),n=1-e/t;return parseFloat(n.toFixed(6),10)},o.prototype.set=function(e){this.stop(),this.path.style.strokeDashoffset=this._progressToOffset(e);var t=this._opts.step;if(r.isFunction(t)){var n=this._easing(this._opts.easing),a=this._calculateTo(e,n),i=this._opts.shape||this;t(a,i,this._opts.attachment)}},o.prototype.stop=function(){this._stopTween(),this.path.style.strokeDashoffset=this._getComputedDashOffset()},o.prototype.animate=function(e,t,n){t=t||{},r.isFunction(t)&&(n=t,t={});var i=r.extend({},t),o=r.extend({},this._opts);t=r.extend(o,t);var s=this._easing(t.easing),u=this._resolveFromAndTo(e,s,i);this.stop(),this.path.getBoundingClientRect();var c=this._getComputedDashOffset(),l=this._progressToOffset(e),h=this;this._tweenable=new a,this._tweenable.tween({from:r.extend({offset:c},u.from),to:r.extend({offset:l},u.to),duration:t.duration,easing:s,step:function(e){h.path.style.strokeDashoffset=e.offset;var n=t.shape||h;t.step(e,n,t.attachment)},finish:function(e){r.isFunction(n)&&n()}})},o.prototype._getComputedDashOffset=function(){var e=window.getComputedStyle(this.path,null);return parseFloat(e.getPropertyValue("stroke-dashoffset"),10)},o.prototype._progressToOffset=function(e){var t=this.path.getTotalLength();return t-e*t},o.prototype._resolveFromAndTo=function(e,t,n){return n.from&&n.to?{from:n.from,to:n.to}:{from:this._calculateFrom(t),to:this._calculateTo(e,t)}},o.prototype._calculateFrom=function(e){return a.interpolate(this._opts.from,this._opts.to,this.value(),e)},o.prototype._calculateTo=function(e,t){return a.interpolate(this._opts.from,this._opts.to,e,t)},o.prototype._stopTween=function(){null!==this._tweenable&&(this._tweenable.stop(),this._tweenable=null)},o.prototype._easing=function(e){return i.hasOwnProperty(e)?i[e]:e},e.exports=o},function(e,t,n){(function(){var t=this||Function("return this")(),n=function(){"use strict";function n(){}function a(e,t){var n;for(n in e)Object.hasOwnProperty.call(e,n)&&t(n)}function r(e,t){return a(t,function(n){e[n]=t[n]}),e}function i(e,t){a(t,function(n){"undefined"==typeof e[n]&&(e[n]=t[n])})}function o(e,t,n,a,r,i,o){var u,c,l,h=e<i?0:(e-i)/r;for(u in t)t.hasOwnProperty(u)&&(c=o[u],l="function"==typeof c?c:d[c],t[u]=s(n[u],a[u],l,h));return t}function s(e,t,n,a){return e+(t-e)*n(a)}function u(e,t){var n=h.prototype.filter,r=e._filterArgs;a(n,function(a){"undefined"!=typeof n[a][t]&&n[a][t].apply(e,r)})}function c(e,t,n,a,r,i,s,c,l,h,d){T=t+n+a,g=Math.min(d||w(),T),_=g>=T,E=a-(T-g),e.isPlaying()&&(_?(l(s,e._attachment,E),e.stop(!0)):(e._scheduleId=h(e._timeoutHandler,v),u(e,"beforeTween"),g<t+n?o(1,r,i,s,1,1,c):o(g,r,i,s,a,t+n,c),u(e,"afterTween"),l(r,e._attachment,E)))}function l(e,t){var n={},r=typeof t;return"string"===r||"function"===r?a(e,function(e){n[e]=t}):a(e,function(e){n[e]||(n[e]=t[e]||p)}),n}function h(e,t){this._currentState=e||{},this._configured=!1,this._scheduleFunction=f,"undefined"!=typeof t&&this.setConfig(t)}var d,f,p="linear",m=500,v=1e3/60,y=Date.now?Date.now:function(){return+new Date},w="undefined"!=typeof SHIFTY_DEBUG_NOW?SHIFTY_DEBUG_NOW:y;f="undefined"!=typeof window?window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||window.mozCancelRequestAnimationFrame&&window.mozRequestAnimationFrame||setTimeout:setTimeout;var T,g,_,E;return h.prototype.tween=function(e){return this._isTweening?this:(void 0===e&&this._configured||this.setConfig(e),this._timestamp=w(),this._start(this.get(),this._attachment),this.resume())},h.prototype.setConfig=function(e){e=e||{},this._configured=!0,this._attachment=e.attachment,this._pausedAtTime=null,this._scheduleId=null,this._delay=e.delay||0,this._start=e.start||n,this._step=e.step||n,this._finish=e.finish||n,this._duration=e.duration||m,this._currentState=r({},e.from||this.get()),this._originalState=this.get(),this._targetState=r({},e.to||this.get());var t=this;this._timeoutHandler=function(){c(t,t._timestamp,t._delay,t._duration,t._currentState,t._originalState,t._targetState,t._easing,t._step,t._scheduleFunction)};var a=this._currentState,o=this._targetState;return i(o,a),this._easing=l(a,e.easing||p),this._filterArgs=[a,this._originalState,o,this._easing],u(this,"tweenCreated"),this},h.prototype.get=function(){return r({},this._currentState)},h.prototype.set=function(e){this._currentState=e},h.prototype.pause=function(){return this._pausedAtTime=w(),this._isPaused=!0,this},h.prototype.resume=function(){return this._isPaused&&(this._timestamp+=w()-this._pausedAtTime),this._isPaused=!1,this._isTweening=!0,this._timeoutHandler(),this},h.prototype.seek=function(e){e=Math.max(e,0);var t=w();return this._timestamp+e===0?this:(this._timestamp=t-e,this.isPlaying()||(this._isTweening=!0,this._isPaused=!1,c(this,this._timestamp,this._delay,this._duration,this._currentState,this._originalState,this._targetState,this._easing,this._step,this._scheduleFunction,t),this.pause()),this)},h.prototype.stop=function(e){
return this._isTweening=!1,this._isPaused=!1,this._timeoutHandler=n,(t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.oCancelAnimationFrame||t.msCancelAnimationFrame||t.mozCancelRequestAnimationFrame||t.clearTimeout)(this._scheduleId),e&&(u(this,"beforeTween"),o(1,this._currentState,this._originalState,this._targetState,1,0,this._easing),u(this,"afterTween"),u(this,"afterTweenEnd"),this._finish.call(this,this._currentState,this._attachment)),this},h.prototype.isPlaying=function(){return this._isTweening&&!this._isPaused},h.prototype.setScheduleFunction=function(e){this._scheduleFunction=e},h.prototype.dispose=function(){var e;for(e in this)this.hasOwnProperty(e)&&delete this[e]},h.prototype.filter={},h.prototype.formula={linear:function(e){return e}},d=h.prototype.formula,r(h,{now:w,each:a,tweenProps:o,tweenProp:s,applyFilter:u,shallowCopy:r,defaults:i,composeEasingObject:l}),"function"==typeof SHIFTY_DEBUG_NOW&&(t.timeoutHandler=c),e.exports=h,h}();!function(){n.shallowCopy(n.prototype.formula,{easeInQuad:function(e){return Math.pow(e,2)},easeOutQuad:function(e){return-(Math.pow(e-1,2)-1)},easeInOutQuad:function(e){return(e/=.5)<1?.5*Math.pow(e,2):-.5*((e-=2)*e-2)},easeInCubic:function(e){return Math.pow(e,3)},easeOutCubic:function(e){return Math.pow(e-1,3)+1},easeInOutCubic:function(e){return(e/=.5)<1?.5*Math.pow(e,3):.5*(Math.pow(e-2,3)+2)},easeInQuart:function(e){return Math.pow(e,4)},easeOutQuart:function(e){return-(Math.pow(e-1,4)-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*Math.pow(e,4):-.5*((e-=2)*Math.pow(e,3)-2)},easeInQuint:function(e){return Math.pow(e,5)},easeOutQuint:function(e){return Math.pow(e-1,5)+1},easeInOutQuint:function(e){return(e/=.5)<1?.5*Math.pow(e,5):.5*(Math.pow(e-2,5)+2)},easeInSine:function(e){return-Math.cos(e*(Math.PI/2))+1},easeOutSine:function(e){return Math.sin(e*(Math.PI/2))},easeInOutSine:function(e){return-.5*(Math.cos(Math.PI*e)-1)},easeInExpo:function(e){return 0===e?0:Math.pow(2,10*(e-1))},easeOutExpo:function(e){return 1===e?1:-Math.pow(2,-10*e)+1},easeInOutExpo:function(e){return 0===e?0:1===e?1:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(-Math.pow(2,-10*--e)+2)},easeInCirc:function(e){return-(Math.sqrt(1-e*e)-1)},easeOutCirc:function(e){return Math.sqrt(1-Math.pow(e-1,2))},easeInOutCirc:function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeOutBounce:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInBack:function(e){var t=1.70158;return e*e*((t+1)*e-t)},easeOutBack:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},elastic:function(e){return-1*Math.pow(4,-8*e)*Math.sin((6*e-1)*(2*Math.PI)/2)+1},swingFromTo:function(e){var t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},swingFrom:function(e){var t=1.70158;return e*e*((t+1)*e-t)},swingTo:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},bounce:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},bouncePast:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?2-(7.5625*(e-=1.5/2.75)*e+.75):e<2.5/2.75?2-(7.5625*(e-=2.25/2.75)*e+.9375):2-(7.5625*(e-=2.625/2.75)*e+.984375)},easeFromTo:function(e){return(e/=.5)<1?.5*Math.pow(e,4):-.5*((e-=2)*Math.pow(e,3)-2)},easeFrom:function(e){return Math.pow(e,4)},easeTo:function(e){return Math.pow(e,.25)}})}(),function(){function e(e,t,n,a,r,i){function o(e){return((f*e+p)*e+m)*e}function s(e){return((v*e+y)*e+w)*e}function u(e){return(3*f*e+2*p)*e+m}function c(e){return 1/(200*e)}function l(e,t){return s(d(e,t))}function h(e){return e>=0?e:0-e}function d(e,t){var n,a,r,i,s,c;for(r=e,c=0;c<8;c++){if(i=o(r)-e,h(i)<t)return r;if(s=u(r),h(s)<1e-6)break;r-=i/s}if(n=0,a=1,r=e,r<n)return n;if(r>a)return a;for(;n<a;){if(i=o(r),h(i-e)<t)return r;e>i?n=r:a=r,r=.5*(a-n)+n}return r}var f=0,p=0,m=0,v=0,y=0,w=0;return m=3*t,p=3*(a-t)-m,f=1-m-p,w=3*n,y=3*(r-n)-w,v=1-w-y,l(e,c(i))}function t(t,n,a,r){return function(i){return e(i,t,n,a,r,1)}}n.setBezierFunction=function(e,a,r,i,o){var s=t(a,r,i,o);return s.displayName=e,s.x1=a,s.y1=r,s.x2=i,s.y2=o,n.prototype.formula[e]=s},n.unsetBezierFunction=function(e){delete n.prototype.formula[e]}}(),function(){function e(e,t,a,r,i,o){return n.tweenProps(r,t,e,a,1,o,i)}var t=new n;t._filterArgs=[],n.interpolate=function(a,r,i,o,s){var u=n.shallowCopy({},a),c=s||0,l=n.composeEasingObject(a,o||"linear");t.set({});var h=t._filterArgs;h.length=0,h[0]=u,h[1]=a,h[2]=r,h[3]=l,n.applyFilter(t,"tweenCreated"),n.applyFilter(t,"beforeTween");var d=e(a,u,r,i,l,c);return n.applyFilter(t,"afterTween"),d}}(),function(e){function t(e,t){var n,a=[],r=e.length;for(n=0;n<r;n++)a.push("_"+t+"_"+n);return a}function n(e){var t=e.match(_);return t?(1===t.length||e.charAt(0).match(g))&&t.unshift(""):t=["",""],t.join(k)}function a(t){e.each(t,function(e){var n=t[e];"string"==typeof n&&n.match(P)&&(t[e]=r(n))})}function r(e){return u(P,e,i)}function i(e){var t=o(e);return"rgb("+t[0]+","+t[1]+","+t[2]+")"}function o(e){return e=e.replace(/#/,""),3===e.length&&(e=e.split(""),e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),C[0]=s(e.substr(0,2)),C[1]=s(e.substr(2,2)),C[2]=s(e.substr(4,2)),C}function s(e){return parseInt(e,16)}function u(e,t,n){var a=t.match(e),r=t.replace(e,k);if(a)for(var i,o=a.length,s=0;s<o;s++)i=a.shift(),r=r.replace(k,n(i));return r}function c(e){return u(b,e,l)}function l(e){for(var t=e.match(E),n=t.length,a=e.match(x)[0],r=0;r<n;r++)a+=parseInt(t[r],10)+",";return a=a.slice(0,-1)+")"}function h(a){var r={};return e.each(a,function(e){var i=a[e];if("string"==typeof i){var o=y(i);r[e]={formatString:n(i),chunkNames:t(o,e)}}}),r}function d(t,n){e.each(n,function(e){for(var a=t[e],r=y(a),i=r.length,o=0;o<i;o++)t[n[e].chunkNames[o]]=+r[o];delete t[e]})}function f(t,n){e.each(n,function(e){var a=t[e],r=p(t,n[e].chunkNames),i=m(r,n[e].chunkNames);a=v(n[e].formatString,i),t[e]=c(a)})}function p(e,t){for(var n,a={},r=t.length,i=0;i<r;i++)n=t[i],a[n]=e[n],delete e[n];return a}function m(e,t){R.length=0;for(var n=t.length,a=0;a<n;a++)R.push(e[t[a]]);return R}function v(e,t){for(var n=e,a=t.length,r=0;r<a;r++)n=n.replace(k,+t[r].toFixed(4));return n}function y(e){return e.match(E)}function w(t,n){e.each(n,function(e){var a,r=n[e],i=r.chunkNames,o=i.length,s=t[e];if("string"==typeof s){var u=s.split(" "),c=u[u.length-1];for(a=0;a<o;a++)t[i[a]]=u[a]||c}else for(a=0;a<o;a++)t[i[a]]=s;delete t[e]})}function T(t,n){e.each(n,function(e){var a=n[e],r=a.chunkNames,i=r.length,o=t[r[0]],s=typeof o;if("string"===s){for(var u="",c=0;c<i;c++)u+=" "+t[r[c]],delete t[r[c]];t[e]=u.substr(1)}else t[e]=o})}var g=/(\d|\-|\.)/,_=/([^\-0-9\.]+)/g,E=/[0-9.\-]+/g,b=new RegExp("rgb\\("+E.source+/,\s*/.source+E.source+/,\s*/.source+E.source+"\\)","g"),x=/^.*\(/,P=/#([0-9]|[a-f]){3,6}/gi,k="VAL",C=[],R=[];e.prototype.filter.token={tweenCreated:function(e,t,n,r){a(e),a(t),a(n),this._tokenData=h(e)},beforeTween:function(e,t,n,a){w(a,this._tokenData),d(e,this._tokenData),d(t,this._tokenData),d(n,this._tokenData)},afterTween:function(e,t,n,a){f(e,this._tokenData),f(t,this._tokenData),f(n,this._tokenData),T(a,this._tokenData)}}}(n)}).call(null)},function(e,t){function n(e,t,a){e=e||{},t=t||{},a=a||!1;for(var r in t)if(t.hasOwnProperty(r)){var i=e[r],o=t[r];a&&l(i)&&l(o)?e[r]=n(i,o,a):e[r]=o}return e}function a(e,t){var n=e;for(var a in t)if(t.hasOwnProperty(a)){var r=t[a],i="\\{"+a+"\\}",o=new RegExp(i,"g");n=n.replace(o,r)}return n}function r(e,t,n){for(var a=e.style,r=0;r<p.length;++r){var i=p[r];a[i+o(t)]=n}a[t]=n}function i(e,t){h(t,function(t,n){null!==t&&void 0!==t&&(l(t)&&t.prefix===!0?r(e,n,t.value):e.style[n]=t)})}function o(e){return e.charAt(0).toUpperCase()+e.slice(1)}function s(e){return"string"==typeof e||e instanceof String}function u(e){return"function"==typeof e}function c(e){return"[object Array]"===Object.prototype.toString.call(e)}function l(e){if(c(e))return!1;var t=typeof e;return"object"===t&&!!e}function h(e,t){for(var n in e)if(e.hasOwnProperty(n)){var a=e[n];t(a,n)}}function d(e,t){return Math.abs(e-t)<m}function f(e){for(;e.firstChild;)e.removeChild(e.firstChild)}var p="Webkit Moz O ms".split(" "),m=.001;e.exports={extend:n,render:a,setStyle:r,setStyles:i,capitalize:o,isString:s,isFunction:u,isObject:l,forEachObject:h,floatEquals:d,removeChildren:f}},function(e,t,n){var a=n(10),r=n(13),i=function(e,t){this._pathTemplate="M 50,50 m 0,-{radius} a {radius},{radius} 0 1 1 0,{2radius} a {radius},{radius} 0 1 1 0,-{2radius}",this.containerAspectRatio=1,a.apply(this,arguments)};i.prototype=new a,i.prototype.constructor=i,i.prototype._pathString=function(e){var t=e.strokeWidth;e.trailWidth&&e.trailWidth>e.strokeWidth&&(t=e.trailWidth);var n=50-t/2;return r.render(this._pathTemplate,{radius:n,"2radius":2*n})},i.prototype._trailString=function(e){return this._pathString(e)},e.exports=i},function(e,t,n){var a=n(10),r=n(14),i=n(13),o=function(e,t){this._pathTemplate="M 50,50 m -{radius},0 a {radius},{radius} 0 1 1 {2radius},0",this.containerAspectRatio=2,a.apply(this,arguments)};o.prototype=new a,o.prototype.constructor=o,o.prototype._initializeSvg=function(e,t){e.setAttribute("viewBox","0 0 100 50")},o.prototype._initializeTextContainer=function(e,t,n){e.text.style&&(n.style.top="auto",n.style.bottom="0",e.text.alignToBottom?i.setStyle(n,"transform","translate(-50%, 0)"):i.setStyle(n,"transform","translate(-50%, 50%)"))},o.prototype._pathString=r.prototype._pathString,o.prototype._trailString=r.prototype._trailString,e.exports=o},function(e,t){THREE.DDSLoader=function(){this._parser=THREE.DDSLoader.parse},THREE.DDSLoader.prototype=Object.create(THREE.CompressedTextureLoader.prototype),THREE.DDSLoader.prototype.constructor=THREE.DDSLoader,THREE.DDSLoader.parse=function(e,t){function n(e){return e.charCodeAt(0)+(e.charCodeAt(1)<<8)+(e.charCodeAt(2)<<16)+(e.charCodeAt(3)<<24)}function a(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)}function r(e,t,n,a){for(var r=n*a*4,i=new Uint8Array(e,t,r),o=new Uint8Array(r),s=0,u=0,c=0;c<a;c++)for(var l=0;l<n;l++){var h=i[u];u++;var d=i[u];u++;var f=i[u];u++;var p=i[u];u++,o[s]=f,s++,o[s]=d,s++,o[s]=h,s++,o[s]=p,s++}return o}var i={mipmaps:[],width:0,height:0,format:null,mipmapCount:1},o=542327876,s=131072,u=512,c=1024,l=2048,h=4096,d=8192,f=16384,p=32768,m=4,v=n("DXT1"),y=n("DXT3"),w=n("DXT5"),T=n("ETC1"),g=31,_=0,E=1,b=2,x=3,P=4,k=7,C=20,R=21,M=22,D=23,S=24,H=25,O=26,A=28,B=new Int32Array(e,0,g);if(B[_]!==o)return console.error("THREE.DDSLoader.parse: Invalid magic number in DDS header."),i;if(!B[C]&m)return console.error("THREE.DDSLoader.parse: Unsupported format, must contain a FourCC code."),i;var F,L=B[R],j=!1;switch(L){case v:F=8,i.format=THREE.RGB_S3TC_DXT1_Format;break;case y:F=16,i.format=THREE.RGBA_S3TC_DXT3_Format;break;case w:F=16,i.format=THREE.RGBA_S3TC_DXT5_Format;break;case T:F=8,i.format=THREE.RGB_ETC1_Format;break;default:if(!(32===B[M]&&16711680&B[D]&&65280&B[S]&&255&B[H]&&4278190080&B[O]))return console.error("THREE.DDSLoader.parse: Unsupported FourCC code ",a(L)),i;j=!0,F=64,i.format=THREE.RGBAFormat}i.mipmapCount=1,B[b]&s&&t!==!1&&(i.mipmapCount=Math.max(1,B[k]));var V=B[A];if(i.isCubemap=!!(V&u),i.isCubemap&&(!(V&c)||!(V&l)||!(V&h)||!(V&d)||!(V&f)||!(V&p)))return console.error("THREE.DDSLoader.parse: Incomplete cubemap faces"),i;i.width=B[P],i.height=B[x];for(var z=B[E]+4,I=i.isCubemap?6:1,N=0;N<I;N++)for(var U=i.width,W=i.height,Y=0;Y<i.mipmapCount;Y++){if(j)var G=r(e,z,U,W),q=G.length;else var q=Math.max(4,U)/4*Math.max(4,W)/4*F,G=new Uint8Array(e,z,q);var X={data:G,width:U,height:W};i.mipmaps.push(X),z+=q,U=Math.max(U>>1,1),W=Math.max(W>>1,1)}return i}},function(e,t){THREE.PVRLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager,this._parser=THREE.PVRLoader.parse},THREE.PVRLoader.prototype=Object.create(THREE.CompressedTextureLoader.prototype),THREE.PVRLoader.prototype.constructor=THREE.PVRLoader,THREE.PVRLoader.parse=function(e,t){var n=13,a=new Uint32Array(e,0,n),r={buffer:e,header:a,loadMipmaps:t};if(55727696===a[0])return THREE.PVRLoader._parseV3(r);if(559044176===a[11])return THREE.PVRLoader._parseV2(r);throw new Error("[THREE.PVRLoader] Unknown PVR format")},THREE.PVRLoader._parseV3=function(e){var t,n,a=e.header,r=a[12],i=a[2],o=a[6],s=a[7],u=(a[9],a[10]),c=a[11];switch(i){case 0:t=2,n=THREE.RGB_PVRTC_2BPPV1_Format;break;case 1:t=2,n=THREE.RGBA_PVRTC_2BPPV1_Format;break;case 2:t=4,n=THREE.RGB_PVRTC_4BPPV1_Format;break;case 3:t=4,n=THREE.RGBA_PVRTC_4BPPV1_Format;break;default:throw new Error("pvrtc - unsupported PVR format "+i)}return e.dataPtr=52+r,e.bpp=t,e.format=n,e.width=s,e.height=o,e.numSurfaces=u,e.numMipmaps=c,e.isCubemap=6===u,THREE.PVRLoader._extract(e)},THREE.PVRLoader._parseV2=function(e){var t,n,a=e.header,r=a[0],i=a[1],o=a[2],s=a[3],u=a[4],t=(a[5],a[6]),c=(a[7],a[8],a[9],a[10]),l=(a[11],a[12]),h=255,d=24,f=25,p=u&h,m=c>0;if(p===f)n=m?THREE.RGBA_PVRTC_4BPPV1_Format:THREE.RGB_PVRTC_4BPPV1_Format,t=4;else{if(p!==d)throw new Error("pvrtc - unknown format "+p);n=m?THREE.RGBA_PVRTC_2BPPV1_Format:THREE.RGB_PVRTC_2BPPV1_Format,t=2}return e.dataPtr=r,e.bpp=t,e.format=n,e.width=o,e.height=i,e.numSurfaces=l,e.numMipmaps=s+1,e.isCubemap=6===l,THREE.PVRLoader._extract(e)},THREE.PVRLoader._extract=function(e){var t={mipmaps:[],width:e.width,height:e.height,format:e.format,mipmapCount:e.numMipmaps,isCubemap:e.isCubemap},n=e.buffer,a=e.dataPtr,r=e.bpp,i=e.numSurfaces,o=0,s=0,u=0,c=0,l=0,h=0;2===r?(u=8,c=4):(u=4,c=4),s=u*c*r/8,t.mipmaps.length=e.numMipmaps*i;for(var d=0;d<e.numMipmaps;){var f=e.width>>d,p=e.height>>d;l=f/u,h=p/c,l<2&&(l=2),h<2&&(h=2),o=l*h*s;for(var m=0;m<i;m++){var v=new Uint8Array(n,a,o),y={data:v,width:f,height:p};t.mipmaps[m*e.numMipmaps+d]=y,a+=o}d++}return t}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={assets:[{name:"backTex",type:"texture",path:"assets/textures/background.png"},{name:"trackTex",type:"texture",path:"assets/textures/road.png"},{name:"numbersTex",type:"texture",path:"assets/textures/numbers.png"},{name:"iconAttackTex",type:"texture",path:"assets/textures/icon_attack.png"},{name:"iconBlueTex",type:"texture",path:"assets/textures/icon_blue.png"},{name:"iconRedTex",type:"texture",path:"assets/textures/icon_red.png"},{name:"towerTex",type:"texture",path:"assets/textures/tower.png"},{name:"castleProgressTex",type:"texture",path:"assets/textures/castle_progress.png"},{name:"castleProgressHandlerTex",type:"texture",path:"assets/textures/castle_progress_handler.png"},{name:"cardBackTex",type:"texture",path:"assets/textures/card_back.png"},{name:"endButtonTex",type:"texture",path:"assets/textures/button_end.png"},{name:"randomButtonTex",type:"texture",path:"assets/textures/button_change.png"},{name:"redUnitTex",type:"texture",path:"assets/textures/soldier_red.png"},{name:"blueUnitTex",type:"texture",path:"assets/textures/soldier_blue.png"}],model:{children:[]}};t.default=n},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t){n(this,e),this.mesh=new THREE.Object3D,this.mesh.name="env_root",this.mesh.add(this._createBack(t.textures.backTex)),this.mesh.add(this._createShuffleButton(t.textures.randomButtonTex)),this.mesh.add(this._createEndButton(t.textures.endButtonTex))}return a(e,[{key:"_createBack",value:function(e){var t=new THREE.PlaneBufferGeometry(.563,1),n=new THREE.MeshBasicMaterial({map:e}),a=new THREE.Mesh(t,n);return a}},{key:"_createShuffleButton",value:function(e){var t=new THREE.PlaneBufferGeometry(.11,.11),n=new THREE.MeshBasicMaterial({map:e,transparent:!0});return this.shuffleButton=new THREE.Mesh(t,n),this.shuffleButton.name="shuffle_button",this.shuffleButton.userData.defaultColor=new THREE.Color(16777215),this.shuffleButton.userData.selectedColor=new THREE.Color(13434828),this.shuffleButton.userData.inactiveColor=new THREE.Color(7829367),this.shuffleButton.position.x=-.228,this.shuffleButton.position.y=-.25,this.shuffleButton.position.z=1.8,this.shuffleButton}},{key:"_createEndButton",value:function(e){var t=new THREE.PlaneBufferGeometry(.11,.11),n=new THREE.MeshBasicMaterial({map:e,transparent:!0});return this.endButton=new THREE.Mesh(t,n),this.endButton.name="end_button",this.endButton.userData.defaultColor=new THREE.Color(16777215),this.endButton.userData.selectedColor=new THREE.Color(13434828),this.endButton.userData.inactiveColor=new THREE.Color(7829367),this.endButton.position.x=.228,this.endButton.position.y=-.25,this.endButton.position.z=1.8,this.endButton}}]),e}();t.default=r},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=.02,i=.04,o=.06,s=[[[0,0]],[[-r,0],[r,0]],[[-r,-r],[r,-r],[0,r]],[[-r,-r],[r,-r],[-r,r],[r,r]],[[-i,-r],[0,-r],[i,-r],[-r,r],[r,r]],[[-i,-r],[0,-r],[i,-r],[-i,r],[0,r],[i,r]],[[-i,-i],[0,-i],[i,-i],[-i,0],[0,0],[i,0],[0,i]],[[-i,-i],[0,-i],[i,-i],[-i,0],[0,0],[i,0],[-r,i],[r,i]],[[-i,-i],[0,-i],[i,-i],[-i,0],[0,0],[i,0],[-i,i],[0,i],[i,i]],[[-o,-i],[-r,-i],[r,-i],[o,-i],[-o,0],[-r,0],[r,0],[o,0],[-r,i],[r,i]]],u=function(){function e(t){n(this,e),this.mesh=new THREE.Object3D,this.mesh.name="tracks_root",t.textures.trackTex.minFilter=THREE.NearestFilter,t.textures.trackTex.magFilter=THREE.NearestFilter;for(var a=0;a<3;++a){var r=this._createTrack(t.textures.trackTex);r.position.x=.184*a-.184,r.position.y=.1,r.userData.index=a,this.mesh.add(r)}this._assets=t}return a(e,[{key:"_createTrack",value:function(e){var t=new THREE.PlaneBufferGeometry(.175,.46),n=new THREE.MeshBasicMaterial({map:e,transparent:!0}),a=new THREE.Mesh(t,n);return a.userData.defaultColor=new THREE.Color(16777215),a.userData.selectedColor=new THREE.Color(11162965),a.position.z=.1,a}},{key:"clearTracks",value:function(){this.mesh.children.forEach(function(e){for(var t=e.children.length-1;t>=0;--t)e.remove(e.children[t])})}},{key:"_createUnitSoldier",value:function(e){var t="red"===e?"redUnitTex":"blueUnitTex",n=this._assets.textures[t],a=new THREE.PlaneBufferGeometry(.04,.04),r=new THREE.MeshBasicMaterial({map:n,transparent:!0});return new THREE.Mesh(a,r)}},{key:"createUnit",value:function(e,t){for(var n=new THREE.Object3D,a=0;a<e;++a){var r=this._createUnitSoldier(t);r.position.x=s[e-1][a][0],r.position.y=s[e-1][a][1],n.add(r)}return n}},{key:"spawnUnitOnTrack",value:function(e,t,n){var a=this.mesh.children[t],r=this.createUnit(n.damage,n.color);r.userData.friendly=e;var i="red"===n.color?1:-1;r.userData.damage=n.damage*i,r.position.y=r.userData.friendly?-.093:.093,a.add(r)}},{key:"hasUnitOnTrack",value:function(e,t){return!!this.getUnitOnTrack(e,t)}},{key:"getUnitOnTrack",value:function(e,t){for(var n=this.mesh.children[t],a=0;a<n.children.length;++a)if(n.children[a].userData.friendly===e)return n.children[a];return null}},{key:"_spawnResolvedUnit",value:function(e,t,n){var a=n>0?"red":"blue",r=this.createUnit(Math.abs(n),a);r.userData.friendly=e,r.position.y=r.userData.friendly?.09:-.09,this.mesh.children[t].add(r)}},{key:"applyDamageOnTrack",value:function(e){var t=this.getUnitOnTrack(!0,e),n=this.getUnitOnTrack(!1,e),a=t?t.userData.damage:0,r=n?n.userData.damage:0;t&&t.parent.remove(t),n&&n.parent.remove(n);var i=null,o=Math.abs(a)-Math.abs(r);if(0!==o)if(o>0){var s=o*Math.sign(a);this._spawnResolvedUnit(!0,e,s),i={playerWon:!0,damage:s}}else{var u=-o*Math.sign(r);this._spawnResolvedUnit(!1,e,u),i={playerWon:!1,damage:u}}return i}}]),e}();t.default=u},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(5),s=a(o),u=n(3),c=a(u),l=n(22),h=a(l),d=[[-.188,-.12],[0,-.12],[.188,-.12]],f=[[-.188,.35],[0,.35],[.188,.35]],p=.32,m=.032,v=function(){function e(t){r(this,e),this._assets=t,t.textures.towerTex.minFilter=THREE.NearestFilter,t.textures.towerTex.magFilter=THREE.NearestFilter,this.mesh=new THREE.Object3D,this.mesh.name="towers_root",this._friendlyTowersT=[],this._enemyTowersT=[],this._fadingDamageArr=[];for(var n=0;n<d.length;++n){var a=this._createTower(t.textures.towerTex);a.position.x=d[n][0],a.position.y=d[n][1],this.mesh.add(a),this._friendlyTowersT[n]=new h.default(this._assets).setSize(.05).setValue(0),this._friendlyTowersT[n].mesh.position.x=-.002,this._friendlyTowersT[n].mesh.position.y=-.044,a.add(this._friendlyTowersT[n].mesh)}for(var i=0;i<f.length;++i){var o=this._createTower(t.textures.towerTex);o.position.x=f[i][0],o.position.y=f[i][1],this.mesh.add(o),this._enemyTowersT[i]=new h.default(this._assets).setSize(.05).setValue(0),this._enemyTowersT[i].mesh.position.x=-.002,this._enemyTowersT[i].mesh.position.y=-.044,o.add(this._enemyTowersT[i].mesh)}var s=this._createTermometer(t.textures.castleProgressTex,p,m);s.position.y=-.26,this.mesh.add(s),this._friendlyT=this._createTermometerHandler(),this._friendlyT.position.y=-.245,this.mesh.add(this._friendlyT);var u=this._createTermometer(t.textures.castleProgressTex,p,m);u.position.y=.45,this.mesh.add(u),this._enemyT=this._createTermometerHandler(),this._enemyT.position.y=.465,this.mesh.add(this._enemyT)}return i(e,[{key:"setTowerTemperature",value:function(e,t,n){var a=e?this._friendlyTowersT:this._enemyTowersT;a[t].setValue(n)}},{key:"updatePlayerTemperatures",value:function(){this._friendlyT.position.x=s.default.playerT/c.default.game.maxT*p/2,this._enemyT.position.x=s.default.enemyT/c.default.game.maxT*p/2}},{key:"showFadingDamage",value:function(e,t,n){var a=new h.default(this._assets).setSize(.03).setUseBrightColor(!0).setValue(n),r=e?this._friendlyTowersT:this._enemyTowersT;a.mesh.userData.startTime=c.default.time,a.mesh.userData.endTime=c.default.time+c.default.fadeDuration,a.mesh.userData.startY=.004,a.mesh.userData.endY=.06,a.mesh.position.x=.072,a.mesh.position.y=a.mesh.userData.startY,r[t].mesh.parent.add(a.mesh),this._fadingDamageArr.push(a)}},{key:"update",value:function(){for(var e=this._fadingDamageArr.length-1;e>=0;--e){var t=this._fadingDamageArr[e];if(c.default.time>t.mesh.userData.endTime)t.mesh.parent.remove(t.mesh),this._fadingDamageArr.splice(e,1);else{var n=(c.default.time-t.mesh.userData.startTime)/(t.mesh.userData.endTime-t.mesh.userData.startTime);t.setOpacity(1-n*n*n),t.mesh.position.y=t.mesh.userData.startY+n*(t.mesh.userData.endY-t.mesh.userData.startY)}}}},{key:"_createTower",value:function(e){var t=new THREE.Mesh(new THREE.PlaneBufferGeometry(.188,.188),new THREE.MeshBasicMaterial({map:e,transparent:!0}));return t.position.z=1,t}},{key:"_createTermometer",value:function(e,t,n){var a=new THREE.Mesh(new THREE.PlaneBufferGeometry(t,n),new THREE.MeshBasicMaterial({map:e,transparent:!0}));return a.position.z=.2,a}},{key:"_createTermometerHandler",value:function(){var e=new THREE.Mesh(new THREE.PlaneBufferGeometry(.04,.04),new THREE.MeshBasicMaterial({map:this._assets.textures.castleProgressHandlerTex,transparent:!0}));return e.position.z=.3,e}}]),e}();t.default=v},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(23),s=a(o),u=n(24),c=a(u),l=new THREE.Vector3(.8,.2,.2),h=new THREE.Vector3(.3,.3,.9),d=new THREE.Vector3(.9,.9,.9),f=new THREE.Vector3(.9,0,0),p=new THREE.Vector3(0,0,.9),m=function(){function e(t){r(this,e),this._assets=t,this.useBrightColor=!1,this.mesh=new THREE.Object3D,this.mesh.position.z=.3}return i(e,[{key:"setSize",value:function(e){return this.mesh.scale.x=e,this.mesh.scale.y=e,this}},{key:"setOpacity",value:function(e){return this.mesh.children.forEach(function(t){t.material.uniforms.opacity.value=e}),this}},{key:"setUseBrightColor",value:function(e){return this.useBrightColor=e,this}},{key:"setValue",value:function(e){for(var t=this.mesh.children.length-1;t>=0;--t)this.mesh.remove(this.mesh.children[t]);var n=e>0?l:e<0?h:d;this.useBrightColor&&(e>0?n=f:e<0&&(n=p));var a=Math.abs(e),r=a<10;if(r){var i=this._createVisual(a,n);this.mesh.add(i)}else{var o=Math.floor(a/10),s=a-10*o,u=this._createVisual(o,n);u.position.x=-.3,this.mesh.add(u);var c=this._createVisual(s,n);c.position.x=.3,this.mesh.add(c)}return this}},{key:"_createVisual",value:function(e,t){var n=new THREE.PlaneBufferGeometry(1,1),a={scaleX:{value:5},scaleY:{value:2},quadNumber:{value:e},color:{value:t},opacity:{value:1},map:{value:this._assets.textures.numbersTex}},r=new THREE.RawShaderMaterial({vertexShader:s.default,fragmentShader:c.default,uniforms:a,transparent:!0}),i=new THREE.Mesh(n,r);return i}}]),e}();t.default=m},function(e,t){e.exports="precision mediump float;\n\nattribute vec3 position;\nattribute vec2 uv;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\n\nuniform float scaleX;\nuniform float scaleY;\nuniform float quadNumber;\n\nvarying vec2 vUv;\n\nvoid main() {\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n    float y = floor(quadNumber / scaleX);\n    float x = quadNumber - scaleX * y;\n    vUv = (uv + vec2(x, y)) / vec2(scaleX, scaleY);\n}\n"},function(e,t){e.exports="precision mediump float;\n\nvarying vec2 vUv;\nuniform sampler2D map;\nuniform vec3 color;\nuniform float opacity;\n\nvoid main() {\n    gl_FragColor = texture2D(map, vUv);\n    gl_FragColor.rgb *= color;\n    gl_FragColor.a *= opacity;\n}\n"},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(22),s=a(o),u=[[-.21,-.395],[-.21+.14,-.395],[-.21+.28,-.395],[.21,-.395]],c=function(){function e(t,n){r(this,e),this.mesh=new THREE.Object3D,this.mesh.name="cards_root";for(var a=0;a<u.length;++a){var i=this._createCard(n.textures.cardBackTex);i.position.x=u[a][0],i.position.y=u[a][1],i.userData.friendly=!0,i.userData.index=a,i.userData.initPosX=i.position.x,i.userData.initPosY=i.position.y,i.position.z=2,this.mesh.add(i)}this._tracks=t,this._assets=n}return i(e,[{key:"_createCard",value:function(e){var t=new THREE.PlaneBufferGeometry(.124,.17),n=new THREE.MeshBasicMaterial({map:e,transparent:!0}),a=new THREE.Mesh(t,n);return a}},{key:"_createIcon",value:function(e){var t=new THREE.PlaneBufferGeometry(.02,.02),n=new THREE.MeshBasicMaterial({map:e,transparent:!0}),a=new THREE.Mesh(t,n);return a}},{key:"updatePlayerCard",value:function(e,t){var n=this;this.mesh.children.forEach(function(a){if(a.userData.index===e){for(var r=a.children.length-1;r>=0;--r)a.remove(a.children[r]);var i="red"===t.color?1:-1,o=new s.default(n._assets).setSize(.07).setValue(t.damage*i);o.mesh.position.y=.015,a.add(o.mesh);var u=n._createIcon("red"===t.color?n._assets.textures.iconRedTex:n._assets.textures.iconBlueTex);u.position.x=-.016,u.position.y=-.058,a.add(u);var c=new s.default(n._assets).setSize(.023).setValue(t.price);c.mesh.position.x=.014,c.mesh.position.y=-.058,a.add(c.mesh),a.visible=!0}})}},{key:"hideCard",value:function(e){this.mesh.children.forEach(function(t){t.userData.index===e&&(t.visible=!1)})}}]),e}();t.default=c},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(5),s=a(o),u=function(){function e(t){r(this,e),this.context=t}return i(e,[{key:"makeTurn",value:function(){for(var e=this,t=s.default.enemyHand,n=s.default.towersT[1],a=this.sortedTowersIndexes(n),r=function(r){var i=a[r];setTimeout(function(){var a=e.chooseCard(n[i],t);e.context.playCard(!1,a,i)},500*(r+1))},i=0;i<3;++i)r(i);setTimeout(function(){e.context.nextPhase()},2e3)}},{key:"sortedTowersIndexes",value:function(e){var t=e.slice(),n=[];return t.forEach(function(e,t){n[t]={index:t,value:e}}),n.sort(function(e,t){return Math.abs(t.value)-Math.abs(e.value)}),[n[0].index,n[1].index,n[2].index]}},{key:"chooseCard",value:function(e,t){for(var n=[],a=0;a<Object.keys(t).length;a++)null!==t[a]?n[a]=Math.abs(e+t[a].price):n[a]=1e3;return n.indexOf(Math.min.apply(Math,n))}}]),e}();t.default=u},function(e,t){"use strict";function n(){return a[Math.floor(Math.random()*a.length)]}Object.defineProperty(t,"__esModule",{value:!0}),t.generateCard=n;var a=[{id:0,color:"red",damage:2,price:1},{id:1,color:"red",damage:4,price:2},{id:2,color:"red",damage:6,price:3},{id:3,color:"red",damage:8,price:4},{id:4,color:"red",damage:10,price:5},{id:5,color:"blue",damage:2,price:-1},{id:6,color:"blue",damage:4,price:-2},{id:7,color:"blue",damage:6,price:-3},{id:8,color:"blue",damage:8,price:-4},{id:9,color:"blue",damage:10,price:-5}]},function(e,t){"use strict";e.exports=function(){if(window.WebGLRenderingContext){for(var e=document.createElement("canvas"),t=["webgl","experimental-webgl","moz-webgl"],n=!1,a=0;a<t.length;a++)try{if(n=e.getContext(t[a]),n&&"function"==typeof n.getParameter)return!0}catch(e){console.log("Unable to initialize WebGL. Your browser may not support it.")}return!1}return!1}}]);